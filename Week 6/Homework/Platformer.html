<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="crafty-min.js"></script>
    <title>Platformer</title>
  </head>
  <body>
    <script>
      function buttonClicked() {
        Crafty.audio.play("meow", 2);
      }

      function start() {
        Crafty.init();
        Crafty.audio.add("meow", "Nope - Sound Effect.mp3");
        Crafty.audio.add("celebarte", "OMFG - Hello.mp3");
        Crafty.defineScene("level 1", createL1);
        Crafty.enterScene("level 1");
      }

      function createL1() {

        var player = Crafty.e("Player, 2D, DOM, Image, Twoway, Gravity, Solid, Collision, Mouse");
        player.attr({x:9, y:550, w:0, h:0});
        player.gravity("Platform");
        player.twoway();
        player.image("Fluttershy.png");
        player.bind("Click", buttonClicked);


        var platform = Crafty.e("Platform, 2D, DOM, Color, Solid, Collision");
        platform.attr({x:-10, y:600, w:150, h:16});
        platform.color("green");

        var platform2 = Crafty.e("Platform, 2D, DOM, Color, Solid, Collision");
        platform2.attr({x:150, y:530, w:150, h:16});
        platform2.color("green");

        var platform3 = Crafty.e("Platform, 2D, DOM, Color, Solid, Collision");
        platform3.attr({x:370, y:450, w:150, h:16});
        platform3.color("green");

        var platform4 = Crafty.e("Platform, 2D, DOM, Color");
        platform4.attr({x:570, y:350, w:120, h:16});
        platform4.color("green");

        var platform5 = Crafty.e("Platform, 2D, DOM, Color");
        platform5.attr({x:370, y:200, w:150, h:16});
        platform5.color("green");

        var goal = Crafty.e("Goal, 2D, DOM, Image, Solid, Collision");
        goal.attr({x:200, y:230, w:0, h:0});
        goal.onHit("Player", hit);
        goal.image("Trash-Can-PNG-Image.png");

        Crafty.defineScene("level2", function() {
          var player = Crafty.e("Player, 2D, DOM, Image, Twoway, Gravity, Solid, Collision, Mouse");
          player.attr({x:9, y:550, w:0, h:0});
          player.gravity("Platform");
          player.twoway();
          player.image("Trash-Can-PNG-Image.png");
          player.bind("Click", buttonClicked);


          var platform = Crafty.e("Platform, 2D, DOM, Color, Solid, Collision");
          platform.attr({x:-10, y:600, w:150, h:16});
          platform.color("green");
        /*  platform.onHit("Player", function() {
          if (!Crafty.audio.isPlaying("meow")) {
            Crafty.audio.play("meow", 10);
          }
          });
          */
          var platform2 = Crafty.e("Platform, 2D, DOM, Color, Solid, Collision");
          platform2.attr({x:150, y:530, w:150, h:16});
          platform2.color("green");

          var platform3 = Crafty.e("Platform, 2D, DOM, Color, Solid, Collision");
          platform3.attr({x:370, y:450, w:150, h:16});
          platform3.color("green");

          var platform4 = Crafty.e("Platform, 2D, DOM, Color");
          platform4.attr({x:570, y:350, w:120, h:16});
          platform4.color("green");

          var platform5 = Crafty.e("Platform, 2D, DOM, Color");
          platform5.attr({x:370, y:200, w:150, h:16});
          platform5.color("green");

          var goal = Crafty.e("Goal, 2D, DOM, Image, Solid, Collision");
          goal.attr({x:200, y:230, w:0, h:0});
          goal.onHit("Player", hit);
          goal.image("Trash-Can-PNG-Image.png");
        });
      }
      var player;
      var platform;
      var platform2;
      var platform3;
      var platform4;
      var platform5;
      var goal;

      function hit() {
        Crafty.audio.play("celebarte");
        alert("YOU WINNED");
        Crafty.enterScene("level2")

      }

      window.onload = start;

    </script>
  </body>
</html>
